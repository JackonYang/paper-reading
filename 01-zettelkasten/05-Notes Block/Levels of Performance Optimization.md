# Levels of Performance Optimization

Created: 2022-05-02 11:10

## Notes

性能调优的方法分类：硬件级、运行级、编译器级和代码级。

（一）硬件级

性能优化的方法有很多种，第一个叫硬件级调优，就是简单粗暴直接换掉性能低的硬件，比如网卡从千兆换到万兆的，硬盘从机械的换成SSD等等。很多时候这也不失为一个好办法。

（二）运行级

另外一个所谓运行级调优，是从运行环境上调整，通过监控整个系统的性能及各项指标看问题所在，然后看能不能通过一些运行参数的调整，比如说内存的使用率非常高，可以试试在操作系统中调整内存页的大小。如果是网络带宽压力特别大，可以试试将网络包的处理程序绑定在某一个核上面。对于网络小包特别多的情况，有一些网卡带包聚合功能，等很多小包会聚合到一定的程度，再统一处理，大量减少中断数量，降低系统消耗。

这些调整的成本很低，难点在于对技术人员要求很高，需要对整个系统非常熟。

（三）编译器级

还有编译器级调优，需要有代码，但是不修改代码，使用编译器的优化选项，有的时候也能够获得巨大的性能提高。比如引入自动向量化，深度优化，性能剖析指导的优化（PGO）等等。需要技术人员熟悉编译的使用，以及对优化过程的理解。

（四）代码级

还有代码级调优，也就是直接改动实现代码，改代码收益或许非常大，比如换个算法，因为有的算法就是比别的算法快很多倍，甚至快几个数量级，但是修改的难度极其大，成本极高，代码改了以后正确性要重新验证，所有测试的步骤都要做。

代码级优化中，一般的思路：

1. 并行化，充分利用多核资源

2. 向量化，充分利用SIMD指令

3. 内存访问优化，充分利用缓存

## References

1.
